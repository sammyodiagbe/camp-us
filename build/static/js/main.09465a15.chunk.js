(this["webpackJsonpcamp-us-frontend"]=this["webpackJsonpcamp-us-frontend"]||[]).push([[0],{103:function(e,t,a){},132:function(e,t){},135:function(e,t,a){},136:function(e,t,a){},137:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(34),o=a.n(r),i=a(6),s=a(3),l=a(7),u=a(8),m=a(9),p=a(4),d=a(24),h=a(5),f=a(18),v=a(2),E="https://konert.herokuapp.com",g="".concat(E,"/auth/create-account"),b="".concat(E,"/auth/login"),y="".concat(E,"/auth/verify-authentication"),O="".concat(E,"/profile"),_="".concat(E,"/profile/check-connection"),N="".concat(E,"/profile/feeds/get-feeds"),S="".concat(E,"/says"),j="".concat(E,"/interaction/new-post"),w="".concat(E,"/interaction/new-comment"),C="".concat(E,"/interaction/post/like"),k="".concat(E,"/connections/follow"),I="".concat(E,"/connections/unfollow"),T="".concat(E,"/messaging/get-all-conversations"),A="".concat(E,"/messaging/get-active-conversation"),U="".concat(E,"/messaging/new-message"),F="".concat(E,"/people/search"),R="".concat(E,"/notifications/get-notifications"),P="".concat(E,"/interaction/getpost"),V=a(10),x=a.n(V),G=function(e){return{type:"IS_VERIFYING_AUTHENTICATION",payload:e}},D=function(e){return{type:"IS_LOGGING_IN",payload:e}},M=function(e){return{type:"IS_CREATING_ACCOUNT",payload:e}},L=function(e){return{type:"IS_GETTING_PROFILE_DETAILS",payload:e}},z=function(e){return{type:"IS_GETTING_SAYS",payload:e}},B=function(e){return{type:"IS_GETTING_SAY",payload:e}},W=function(e){return{type:"IS_GETTING_CONVERSATION",payload:e}};a(56);var H=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target,n=t.id,c=t.value,r=Object(v.a)({},a.state.input,Object(f.a)({},n,c));a.setState({input:r})},a.createUserAccount=function(e){e.preventDefault();var t=a.state.input,n=function(e){var t={},a={name:{message:"Name is required",isValid:function(e){return""!==e.trim()&&new RegExp("^(?=.[a-zA-Z])").test(e)}},email:{message:"Email field is required",isValid:function(e){return""!==e.trim()&&new RegExp("^[a-zA-Z0-9_.-]{2,}@[a-zA-Z0-9]{2,}.[a-zA-Z0-9]{2,}$").test(e)}},nickname:{message:"Nickname field is required",isValid:function(e){if(""===e.trim())return!1;return/^\w{1,}$/.test(e)}},password:{message:"Password field is required",isValid:function(e){return""!==e.trim()&&new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,30})").test(e)}},cpassword:{message:"Passwords do not match",isValid:function(t){return t===e.password}}};for(var n in e){var c=a[n],r=c.isValid(e[n]);t[n]=r?null:c.message}return t}(t),c=!1;for(var r in n)n[r]&&(c=!0);if(c)console.log(n),console.log("There are fields with errors");else{var o=Object(v.a)({},t);delete o.cpassword,a.props.createUserAccount(o)}},a.state={input:{name:"",email:"",nickname:"",password:"",cpassword:""}},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.input,t=e.name,a=e.email,n=e.password,r=e.cpassword,o=e.nickname;return c.a.createElement("div",{className:"camp-auth-container"},c.a.createElement("h1",{className:"camp-auth-title"},"Create Account"),c.a.createElement("form",{onSubmit:this.createUserAccount,noValidate:!0},c.a.createElement("div",null,c.a.createElement("label",{htmlFor:"name"},"Full Name",c.a.createElement("input",{type:"text",id:"name",placeholder:"James Allen",onChange:this.handleInputChange,value:t}))),c.a.createElement("div",null,c.a.createElement("label",{htmlFor:"email"},"Email",c.a.createElement("input",{type:"email",id:"email",placeholder:"Email",onChange:this.handleInputChange,value:a}))),c.a.createElement("div",null,c.a.createElement("label",{htmlFor:"nickname"},"Nickname",c.a.createElement("input",{type:"text",id:"nickname",placeholder:"Nickname",onChange:this.handleInputChange,value:o}))),c.a.createElement("div",null,c.a.createElement("label",{htmlFor:"cpassword"},"Password",c.a.createElement("input",{type:"password",id:"password",placeholder:"Password",onChange:this.handleInputChange,value:n}))),c.a.createElement("div",null,c.a.createElement("label",{htmlFor:"cpassword"},"Confirm Password",c.a.createElement("input",{type:"password",id:"cpassword",placeholder:"Confirm Password",onChange:this.handleInputChange,value:r}))),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"Create Account"))),c.a.createElement("p",null,"Already have an account ",c.a.createElement(p.b,{to:"/auth/login"},"Login")))}}]),t}(n.Component),Y=Object(h.b)((function(e){return{}}),(function(e){return{createUserAccount:function(t){return e(function(e){return function(t){t(M(!0)),x.a.post(g,e,{withCredentials:!0}).then((function(e){console.log(e.data),t(M(!1))})).catch((function(e){console.log(e),t(M(!1))}))}}(t))}}}))(H),q=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target,n=t.id,c=t.value,r=Object(v.a)({},a.state.input,Object(f.a)({},n,c));a.setState({input:r})},a.login=function(e){e.preventDefault();var t=a.state.input;a.props.login(t)},a.state={input:{username:"",password:""}},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.input,t=e.username,a=e.password;return c.a.createElement("div",{className:"camp-auth-container"},c.a.createElement("h1",{className:"camp-auth-title"},"Login"),c.a.createElement("form",{onSubmit:this.login,noValidate:!0},c.a.createElement("div",null,c.a.createElement("label",{htmlFor:"username"},c.a.createElement("input",{type:"text",placeholder:"username or email",id:"username",value:t,onChange:this.handleInputChange}))),c.a.createElement("div",null,c.a.createElement("label",{htmlFor:"password"},c.a.createElement("input",{type:"password",placeholder:"Password",id:"password",value:a,onChange:this.handleInputChange}))),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"Login"))),c.a.createElement("p",null,"Don't have an account ",c.a.createElement(p.b,{to:"/auth/signup"},"Create Account")))}}]),t}(n.Component),Z=Object(h.b)((function(e){return{}}),(function(e){return{login:function(t){return e(function(e){return function(t){t(D(!0)),x.a.post(b,e,{withCredentials:!0}).then((function(e){console.log(e.data),t(D(!1))})).catch((function(e){return t(D(!1))}))}}(t))}}}))(q),J=function(e){return{type:"SET_VIEWED_PROFILE",payload:e}},$=function(e){return{type:"SET_VIEWED_USER_SAYS",payload:e}},K=function(e){return{type:"SET_RELATIONSHIP",payload:e}},Q=function(e){return function(t){t(z(!0)),x.a.get("".concat(S,"/").concat(e),{withCredentials:!0}).then((function(e){var a=e.data;t($(a.says)),t(z(!1))})).catch((function(e){return z(!1)}))}},X=(a(103),a(151)),ee=a(152),te=a(153),ae=a(154),ne=a(155),ce=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={user:null},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.setState({user:this.props.user})}},{key:"render",value:function(){var e=this.state.user,t=(e||{})._id;return c.a.createElement("div",{className:"camp-navigation-bar"},c.a.createElement("nav",{className:"camp-mobile-navigation-bar"},c.a.createElement("div",null,c.a.createElement(p.c,{to:"/",exact:!0,activeClassName:"camp-active-nav"},c.a.createElement(X.a,{fontSize:"default",className:"camp-navigation-icon"}))),c.a.createElement("div",null,c.a.createElement(p.c,{to:"/search",exact:!0,activeClassName:"camp-active-nav"},c.a.createElement(ee.a,{fontSize:"default",className:"camp-navigation-icon"}))),c.a.createElement("div",null,c.a.createElement(p.c,{to:"/messages",exact:!0,activeClassName:"camp-active-nav"},c.a.createElement(te.a,{fontSize:"default",className:"camp-navigation-icon"}))),c.a.createElement("div",null,c.a.createElement(p.c,{to:"/profile/".concat(t),exact:!0,activeClassName:"camp-active-nav"},c.a.createElement(ae.a,{fontSize:"default",className:"camp-navigation-icon"}))),c.a.createElement("div",null,c.a.createElement(p.c,{to:"/notifications",exact:!0,activeClassName:"camp-active-nav"},c.a.createElement(ne.a,{fontSize:"default",className:"camp-navigation-icon"})))))}}]),t}(n.Component),re=Object(h.b)((function(e){return{user:e.authentication.user}}),null)(ce),oe=a(73),ie=a.n(oe),se=function(e){return function(t){x.a.post(C,{say:e},{withCredentials:!0}).then((function(e){})).catch((function(e){return console.log(e)}))}},le=function(e){return{type:"SET_FEEDS",payload:e}},ue=a(156),me=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target.value;a.setState({postText:t})},a.postSomething=function(e){e.preventDefault();var t=a.state.postText;""!==t&&(a.props.postSay(t),a.setState({postText:""}))},a.unfollowUser=function(){var e=a.props,t=e.user;return(0,e.unfollowUser)(t._id)},a.followUser=function(){var e=a.props,t=e.user;return(0,e.followUser)(t._id)},a.state={postText:""},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.postText,t=this.props,a=t.page,n=t.isAuthUser,r=t.user,o=t.relationship,i=o||{},s=i.isMutual,l=i.isFollowing,u=r.name,m=r.nickname,d=r._id,h="profile"!==a||n?c.a.createElement(c.a.Fragment,null):c.a.createElement("div",{className:"camp-relation-container"},l||s?c.a.createElement("button",{className:"camp-relation camp-relation-unfollow",onClick:this.unfollowUser},"Unfollow"):c.a.createElement("button",{className:"camp-relation camp-relation-follow",onClick:this.followUser},"Follow"),s&&c.a.createElement(p.b,{to:"/chat/".concat(d)},c.a.createElement(ue.a,{color:"action"})));return c.a.createElement("div",{className:"camp-balloon-head"},c.a.createElement("div",{className:"camp-head-top"},c.a.createElement("div",{className:"camp-user-avatar"}),c.a.createElement("div",{className:"camp-user-details"},c.a.createElement("h3",null,"".concat(u)),c.a.createElement("p",null,"@".concat(m)))),n&&c.a.createElement("div",{className:"camp-head-bottom"},c.a.createElement("form",{noValidate:!0,onSubmit:this.postSomething},c.a.createElement("textarea",{placeholder:"Have a say",value:e,onChange:this.handleInputChange}),c.a.createElement("button",null,"Make post"))),h)}}]),t}(n.Component),pe=Object(h.b)((function(e){return{}}),(function(e){return{postSay:function(t){return e(function(e){return function(t){x.a.post(j,{content:e},{withCredentials:!0}).then((function(e){var t=new Audio(ie.a);t.play().then((function(){t.remove()})).catch((function(e){return console.log(e)}))})).catch((function(e){console.log(e)}))}}(t))},followUser:function(t){return e(function(e){return function(t){x.a.post(k,{whomToFollow:e},{withCredentials:!0}).then((function(e){console.log("data ",e.data)})).catch((function(e){return console.log(e)}))}}(t))},unfollowUser:function(t){return e(function(e){return console.log("let us unfollow user"),function(t){x.a.post(I,{whoToUnfollow:e},{withCredentials:!0}).then((function(e){console.log(e.data)})).then((function(e){return console.log(e)}))}}(t))}}}))(me),de=a(157),he=a(158),fe=a(36),ve=a.n(fe),Ee=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.says,a=e.likeOrUnlike,n=t?t.map((function(e,t){var n=e.content,r=e.said_by,o=e._id,i=e.likes,s=e.comments,l=r.name,u=r.nickname,m=r._id;return c.a.createElement("div",{className:"camp-a-say",key:t},c.a.createElement("div",{className:"camp-say-top"},c.a.createElement("div",{className:"camp-say-talker"}),c.a.createElement("div",{className:"camp-say-talker-details"},c.a.createElement("h4",null,c.a.createElement(p.b,{to:"/profile/".concat(m)},"".concat(l))),c.a.createElement("p",null,"@".concat(u))),c.a.createElement("div",{className:"camp-say-time"},c.a.createElement("p",null,"just now"))),c.a.createElement("div",{className:"camp-say-bottom"},c.a.createElement("div",{className:"camp-say-say"},c.a.createElement("p",null,n)),c.a.createElement("div",{className:"camp-say-reaction"},c.a.createElement("button",{onClick:function(){var e=new Audio(ve.a);e.play().then((function(){e.remove()})).catch((function(e){return console.log(e)})),a(o)}},i.length,c.a.createElement(de.a,{fontSize:"small",color:"secondary",className:"camp-react"})),c.a.createElement(p.b,{to:{pathname:"/view-post/".concat(o),say:e}},s.length," ",c.a.createElement(he.a,{fontSize:"small",className:"camp-react"})))))})):c.a.createElement("div",null,"hello");return c.a.createElement("div",{className:"camp-render-says"},n)}}]),t}(n.Component),ge=Object(h.b)(null,(function(e){return{likeOrUnlike:function(t){return e(se(t))}}}))(Ee),be=a(23),ye=a.n(be),Oe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={isAuthUsers:!1,page:"profile",feeds_socket:null},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.user,a=t._id,n=this.props.match.params.profile_id,r=ye.a.connect("".concat(E,"/profile"));if(!t)return c.a.createElement(d.a,{to:"/auth/login"});a===n?(this.setState({isAuthUser:!0,feeds_socket:r}),this.props.setViewProfile(t),this.props.getUserSays(a)):(this.setState({isAuthUser:!1}),this.props.getUserProfile(n),this.props.checkRelationship(n),setInterval((function(){r.emit("get_relationship",{authUserId:a,profile_id:n})}),500)),r.on("connect",(function(){e.setState({feeds_socket:r}),r.on("set_profile_feeds",(function(t){e.props.setFeeds(t)})),r.on("set_relationship",(function(t){e.props.setRelationship(t)}))})),setInterval((function(){var t=e.state.isAuthUser;r.emit("get_profile_feeds",{oldFeeds:e.props.says,profile_id:t?a:n})}),500)}},{key:"componentWillUnmount",value:function(){this.state.feeds_socket.disconnect(),this.setState({feeds_socket:null}),this.props.setFeeds([]),this.props.setRelationship({}),this.props.setViewProfile({})}},{key:"render",value:function(){var e=this.props,t=e.says,a=e.viewed_profile,n=e.isgettingprofile,r=e.isgettingsays,o=e.relationship,i=e.user,s=this.state,l=s.isAuthUser,u=s.page;return i?c.a.createElement(c.a.Fragment,null,c.a.createElement(re,null),c.a.createElement("div",{className:"camp-main-content"},r||n?c.a.createElement("p",null,"Getting details hold on"):c.a.createElement(c.a.Fragment,null,c.a.createElement(pe,{isAuthUser:l,page:u,user:a,relationship:o}),c.a.createElement(ge,{says:t})," "))):c.a.createElement(d.a,{to:"/auth/login"})}}]),t}(n.Component),_e=Object(h.b)((function(e){var t=e.authentication,a=e.profile,n=e.interactions;return{user:t.user,says:a.viewed_user_says,viewed_profile:a.viewed_user,isgettingprofile:n.isgettingprofiledetails,isgettingsays:n.isgettingsays,relationship:a.viewedProfileRelationship}}),(function(e){return{setViewProfile:function(t){return e(J(t))},getUserSays:function(t){return e(Q(t))},getUserProfile:function(t){return e(function(e){return function(t){t(L(!0)),x.a.get("".concat(O,"/").concat(e),{withCredentials:!0}).then((function(a){var n=a.data.user;t(J(n)),t(Q(e)),t(L(!1))})).then((function(e){return t(L(!1))}))}}(t))},checkRelationship:function(t,a){return e(function(e){return function(t){x.a.get("".concat(_,"/").concat(e),{withCredentials:!0}).then((function(e){var a=e.data;console.log(a),t(K(a))})).catch((function(e){return console.log(e)}))}}(t))},setRelationship:function(t){return e(K(t))},setFeeds:function(t){return e($(t))}}}))(Oe),Ne=(a(135),function(){return c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"placeload"},c.a.createElement("div",{className:"header"},c.a.createElement("div",{className:"img loads"}),c.a.createElement("div",{className:"header-content"},c.a.createElement("div",{className:"content-shape loads"}),c.a.createElement("div",{className:"content-shape loads"}))),c.a.createElement("div",{className:"image-placeholder loads"}),c.a.createElement("div",{className:"placeholder-footer"},c.a.createElement("div",{className:"footer-block"},c.a.createElement("div",{className:"content-shape loads"}),c.a.createElement("div",{className:"content-shape loads"})))))}),Se=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={feeds_socket:null},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.loadFeeds();var t=this.props,a=t.newsfeeds,n=t.user,c=ye.a.connect("".concat(E,"/feeds"));c.on("connect",(function(){e.setState({feeds_socket:c}),c.on("got_new_feeds",(function(t){e.props.setFeeds(t)}))})),setInterval((function(){c.emit("get_feeds_update",{oldFeeds:a,authuserid:n._id})}),500)}},{key:"componentWillUnmount",value:function(){this.state.feeds_socket.disconnect(),this.setState({feeds_socket:null})}},{key:"render",value:function(){var e=this.props,t=e.user,a=e.isgettingsays;return t?c.a.createElement(c.a.Fragment,null,c.a.createElement(re,null),c.a.createElement("div",{className:"camp-main-content"},c.a.createElement(pe,{isAuthUser:!0,user:t}),a?c.a.createElement(Ne,null):c.a.createElement(ge,{says:this.props.newsfeeds.reverse()}))):c.a.createElement(d.a,{to:"/auth/login"})}}]),t}(n.Component);Se.getDerivedStateFromProps=function(){};var je=Object(h.b)((function(e){var t=e.authentication,a=e.conversation,n=e.interactions;return{user:t.user,newsfeeds:a.newsfeeds,isgettingsays:n.isgettingsays}}),(function(e){return{loadFeeds:function(){return e((function(e){x.a.get(N,{withCredentials:!0}).then((function(t){var a=t.data.feeds;e(le(a))})).catch((function(e){return console.log(e)}))}))},setFeeds:function(t){return e(le(t))}}}))(Se),we=(a(70),function(e){var t=e.authuser,a=e.conversations;console.log(a);var n=a.map((function(e,a){var n=e.messages,r=e.user1,o=e.user2,i=t._id===r._id?o:r,s=n[n.length-1].body.length>30?"".concat(n[n.length-1].body.slice(0,30),"......"):n[n.length-1].body;return c.a.createElement(p.b,{to:"/chat/".concat(i._id),className:"camp-a-card",key:a},c.a.createElement("div",{className:"camp-a-card-left"}),c.a.createElement("div",{className:"camp-a-card-right"},c.a.createElement("h4",null,i.name),c.a.createElement("p",null,s)))}));return c.a.createElement(c.a.Fragment,null,n)}),Ce=(a(136),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.getConversations()}},{key:"render",value:function(){var e=this.props,t=e.conversations,a=e.authuser;return a?c.a.createElement(c.a.Fragment,null,c.a.createElement(re,null),c.a.createElement("div",{className:"camp-main-content"},c.a.createElement(we,{conversations:t,authuser:a}))):c.a.createElement(d.a,{to:"/auth/login"})}}]),t}(n.Component)),ke=Object(h.b)((function(e){var t=e.conversation,a=e.authentication;return{conversations:t.conversations,authuser:a.user}}),(function(e){return{getConversations:function(){return e((function(e){x.a.get(T,{withCredentials:!0}).then((function(t){return console.log(t.data.conversations),e({type:"GET_CONVERSATIONS",payload:t.data.conversations.reverse()})})).catch((function(e){return console.log(e)}))}))}}}))(Ce),Ie=(a(137),a(159)),Te=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target.value,n=a.state,c=n.chat_nsp,r=n.friend;""!==t&&t.length>0?c.emit("typing",{friend:r._id}):c.emit("done_typing",{friend:r._id}),a.setState({body:t})},a.sendMessage=function(e){e.preventDefault();var t=a.state,n=t.body,c=t.friend,r=t.chat_nsp,o=a.props.authuser;if(""!==n&&""!==n.trimLeft()&&""!==n.trimRight()){var i={body:n,friendid:c._id},s=Object(v.a)({},i,{time:Date.now()});r.emit("new_message",s),a.setState({body:"",typing:!1},(function(){r.emit("done_typing",{friend:c._id}),a.chatBodyRef.scrollTop=a.chatBodyRef.scrollHeight})),a.props.appendMessage(Object(v.a)({},s,{sender:o._id})),a.props.sendMessage(i)}},a.state={body:"",chat_nsp:null,typing:!1,friend:{},friendid:""},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.friendid,a=this.props.authuser._id;this.setState({friendid:t},(function(){e.props.fetchConversation(t)}));var n=ye.a.connect("".concat(E,"/chat"));n.on("connect",(function(){e.setState({chat_nsp:n}),n.emit("user_connected",{user:a}),n.on("typing",(function(){e.setState({typing:!0})})),n.on("done_typing",(function(){e.setState({typing:!1})})),n.on("new_message",(function(t){var a=e.state.friend;e.props.appendMessage(Object(v.a)({},t,{sender:a._id}))}))}))}},{key:"componentDidUpdate",value:function(){this.chatBodyRef.scrollTop=this.chatBodyRef.scrollHeight}},{key:"componentWillUnmount",value:function(){this.state.chat_nsp.disconnect(),this.setState({chat_nsp:null})}},{key:"render",value:function(){var e=this,t=this.state,a=t.body,n=t.typing,r=t.friend,o=this.props,i=o.authuser,s=o.chatConversation,l=o.gettingconversation,u=i._id,m=s.conversation;if(!i)return c.a.createElement(d.a,{to:"/auth/login"});var p=m?this.props.chatConversation.conversation.messages.map((function(e,t){var a=e.body,n=e.sender;return c.a.createElement("div",{className:"camp-chat-balloon ".concat(n===u?"camp-balloon-authuser":"camp-balloon-friend"),key:t},c.a.createElement("div",{className:"camp-balloon"},c.a.createElement("p",null,a)))})):c.a.createElement("p",null,"No message oo");return c.a.createElement(c.a.Fragment,null,c.a.createElement(re,null),c.a.createElement("div",{className:"camp-main-content"},l?c.a.createElement(Ne,null):c.a.createElement("div",{className:"camp-active-chat-bubble"},c.a.createElement("div",{className:"camp-bubble-head"},c.a.createElement("div",{className:"camp-bubble-head-user"}),c.a.createElement("div",{className:"camp-bubble-head-user-details"},c.a.createElement("h4",null,r.name),n?c.a.createElement("p",{style:{color:"green",fontWeight:"bolder"}},"typing..."):c.a.createElement("p",null,"@",r.nickname))),c.a.createElement("div",{className:"camp-bubble-body",ref:function(t){return e.chatBodyRef=t}},p),c.a.createElement("div",{className:"camp-bubble-leg"},c.a.createElement("form",{noValidate:!0,onSubmit:this.sendMessage},c.a.createElement("textarea",{placeholder:"Your message...",value:a,onChange:this.handleInputChange}),c.a.createElement("button",null,c.a.createElement(Ie.a,{fontSize:"default"})))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.chatConversation,n=e.authuser;if("undefined"!==typeof a.conversation){var c=a.conversation,r=c.user1,o=c.user2;return{friend:n._id===r._id?o:r}}return{}}}]),t}(n.Component),Ae=Object(h.b)((function(e){var t=e.conversation,a=e.authentication,n=e.interactions;return{chatConversation:t.activeBubble,authuser:a.user,gettingconversation:n.isgettingconversation}}),(function(e){return{fetchConversation:function(t,a){return e(function(e){return function(t){t(W(!0)),x.a.get("".concat(A,"/").concat(e),{withCredentials:!0}).then((function(e){t({type:"GET_ACTIVE_CONVERSATION",payload:e.data}),t(W(!1))})).catch((function(e){t(W(!1))}))}}(t))},sendMessage:function(t){return e(function(e){return function(t){x.a.post(U,e,{withCredentials:!0}).then((function(e){})).catch((function(e){return console.log(e)}))}}(t))},appendMessage:function(t){return e(function(e){return{type:"APPEND_MESSAGE",payload:e}}(t))}}}))(Te),Ue=(a(138),function(e){var t=e.searchedusers,a=e.authuser._id,n=t.map((function(e,t){var n=e._id,r=e.name,o=e.nickname;return a===n?null:c.a.createElement("p",{className:"camp-a-search",key:t},c.a.createElement(p.b,{to:"/profile/".concat(n)},"".concat(r)),c.a.createElement("span",null,"@",o))}));return c.a.createElement("div",{className:"camp-search-results"},n)}),Fe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target.value;a.setState({searchquery:t})},a.findUser=function(e){console.log("finding user"),e.preventDefault();var t=a.state.searchquery;console.log(t),""!==t.trimLeft()&&""!==t.trimRight()&&a.props.findUser(t)},a.state={searchquery:""},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.searchquery,t=this.props,a=t.searchedusers,n=t.authuser;return n?c.a.createElement(c.a.Fragment,null,c.a.createElement(re,null),c.a.createElement("div",{className:"camp-main-content"},c.a.createElement("div",{className:"camp-search-container"},c.a.createElement("form",{noValidate:!0,onSubmit:this.findUser},c.a.createElement("input",{type:"text",placeholder:"search friend",value:e,onChange:this.handleInputChange}))),c.a.createElement(Ue,{authuser:n,searchedusers:a}))):c.a.createElement(d.a,{to:"/auth/login"})}}]),t}(n.Component),Re=Object(h.b)((function(e){var t=e.searches,a=e.authentication;return{searchedusers:t.searchedusers,authuser:a.user}}),(function(e){return{findUser:function(t){return e(function(e){return console.log("let find a user"),function(t){x.a.get("".concat(F,"/").concat(e),{withCredentials:!0}).then((function(e){var a=e.data.searchedusers;t({type:"SET_SEARCH_RESULT",payload:a})})).catch((function(e){return console.log(e)}))}}(t))}}}))(Fe),Pe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.getUserNotifications()}},{key:"render",value:function(){return this.props.authuser?c.a.createElement(c.a.Fragment,null,c.a.createElement(re,null),c.a.createElement("div",{className:"camp-main-content"},"user notifications")):c.a.createElement(d.a,{to:"/auth/login"})}}]),t}(n.Component),Ve=Object(h.b)((function(e){return{authuser:e.authentication.user}}),(function(e){return{getUserNotifications:function(){return e((function(e){x.a.get(R,{withCredentials:!0}).then((function(t){var a=t.data.notifications;console.log(a),e(function(e){return{type:"SET_USER_NOTIFICATIONS",payload:e}}(a))})).catch((function(e){console.log(e)}))}))}}}))(Pe),xe=(a(139),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target.value;a.setState({comment:t})},a.comment=function(e){e.preventDefault();var t=a.props.say._id,n=a.state.comment;""!==n.trimRight()&&""!==n.trimRight()&&(a.props.comment(n,t),a.setState({comment:""}))},a.state={comment:""},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.postid;this.props.getPost(e)}},{key:"render",value:function(){var e=this.props,t=e.say,a=e.isgettingsay,n=e.authuser,r=this.state.comment;if(!n)return c.a.createElement(d.a,{to:"/auth/login"});if(a)return c.a.createElement(c.a.Fragment,null,c.a.createElement(re,null),c.a.createElement("div",{className:"camp-main-content"},c.a.createElement("p",null,"Fetching data")));if("undefined"!=typeof t.said_by){var o=t.content,i=t.said_by,s=t._id,l=t.likes,u=t.comments,m=i.nickname,h=i.name,f=i._id;return c.a.createElement(c.a.Fragment,null,c.a.createElement(re,null),c.a.createElement("div",{className:"camp-main-content"},c.a.createElement("div",{className:"camp-a-say"},c.a.createElement("div",{className:"camp-say-top"},c.a.createElement("div",{className:"camp-say-talker"}),c.a.createElement("div",{className:"camp-say-talker-details"},c.a.createElement("h4",null,c.a.createElement(p.b,{to:"/profile/".concat(f)},"".concat(h))),c.a.createElement("p",null,"@".concat(m))),c.a.createElement("div",{className:"camp-say-time"},c.a.createElement("p",null,"just now"))),c.a.createElement("div",{className:"camp-say-bottom"},c.a.createElement("div",{className:"camp-say-say"},c.a.createElement("p",null,o)),c.a.createElement("div",{className:"camp-comments"},u.length?u.map((function(e,t){var a=e.body;e.said_by;return c.a.createElement("p",{key:t},a)})):null),c.a.createElement("div",{className:"camp-say-comment-box"},c.a.createElement("form",{noValidate:!0,onSubmit:this.comment},c.a.createElement("textarea",{placeholder:"your comment",value:r,onChange:this.handleInputChange}),c.a.createElement("button",null,"comment"))),c.a.createElement("div",{className:"camp-say-reaction"},c.a.createElement("button",{onClick:function(){var e=new Audio(ve.a);e.play().then((function(){e.remove()})).catch((function(e){})),se(f)}},l.length,c.a.createElement(de.a,{fontSize:"small",color:"secondary",className:"camp-react"})),c.a.createElement("button",{to:{pathname:"/view-post/".concat(s),say:t}},u.length," ",c.a.createElement(he.a,{fontSize:"small",className:"camp-react"})))))))}return c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"Ooops something is broken"))}}]),t}(n.Component)),Ge=Object(h.b)((function(e){var t=e.conversation,a=e.interactions;return{say:t.viewedPost,isgettingsay:a.isgettingsinglesay,authuser:e.authentication.user}}),(function(e){return{likeOrUnlike:function(t){return e(se(t))},getPost:function(t){return e(function(e){return function(t){t(B(!0)),x.a.get("".concat(P,"/").concat(e),{withCredentials:!0}).then((function(e){var a=e.data.say;t(B(!1)),t({type:"SET_VIEWED_POST",payload:a})})).catch((function(e){return console.log(e)}))}}(t))},comment:function(t,a){return e(function(e,t){return function(a){x.a.post(w,{body:e,postid:t},{withCredentials:!0}).then((function(e){})).catch((function(e){console.log(e)}))}}(t,a))}}}))(xe),De=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={user:null},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isverifyingauth,a=e.Socket;e.user;return c.a.createElement(c.a.Fragment,null,t?c.a.createElement("div",{className:"App"},"Verifying authentication"):c.a.createElement(p.a,null,c.a.createElement("div",{className:"App"},c.a.createElement(d.d,null,c.a.createElement(d.b,{exact:!0,path:"/",render:function(e){return c.a.createElement(je,Object.assign({},e,{Socket:a}))}}),c.a.createElement(d.b,{exact:!0,path:"/auth/signup",component:Y}),c.a.createElement(d.b,{exact:!0,path:"/auth/login",component:Z}),c.a.createElement(d.b,{exact:!0,path:"/profile/:profile_id",render:function(e){return c.a.createElement(_e,Object.assign({},e,{Socket:a}))}}),c.a.createElement(d.b,{exact:!0,path:"/messages",render:function(e){return c.a.createElement(ke,Object.assign({},e,{Socket:a}))}}),c.a.createElement(d.b,{exact:!0,path:"/chat/:friendid",render:function(e){return c.a.createElement(Ae,Object.assign({},e,{Socket:a}))}}),c.a.createElement(d.b,{exact:!0,path:"/search",render:function(e){return c.a.createElement(Re,Object.assign({},e,{Socket:a}))}}),c.a.createElement(d.b,{exact:!0,path:"/notifications",render:function(e){return c.a.createElement(Ve,Object.assign({},e,{Socket:a}))}}),c.a.createElement(d.b,{exact:!0,path:"/view-post/:postid",render:function(e){return c.a.createElement(Ge,Object.assign({},e,{Socket:a}))}})))))}}]),t}(n.Component),Me=Object(h.b)((function(e){var t=e.interactions,a=e.authentication;return{isverifyingauth:t.isverifyingauthentication,user:a.user}}),(function(e){return{}}))(De),Le=a(22),ze={user:null},Be={viewed_user:{},viewed_user_says:[],viewedProfileRelationship:{},isFollowingUser:!1,relationshipIsMutual:!1},We={isloggingin:!1,iscreatingaccount:!1,isverifyingauthentication:!1,isgettingprofiledetails:!1,isgettingsays:!1,isgettingsinglesay:!1,isgettingconversation:!1},He=a(37),Ye={conversations:[],activeBubble:{},newsfeeds:[],viewedPost:{}},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"GET_CONVERSATIONS":e=Object(v.a)({},e,{conversations:n});break;case"GET_ACTIVE_CONVERSATION":e=Object(v.a)({},e,{activeBubble:n});break;case"SET_FEEDS":e=Object(v.a)({},e,{newsfeeds:n});break;case"SET_VIEWED_POST":e=Object(v.a)({},e,{viewedPost:n});break;case"APPEND_MESSAGE":var c=e.activeBubble.conversation.messages,r=e.activeBubble.conversation;e=Object(v.a)({},e,{activeBubble:Object(v.a)({},e.activeBubble,{conversation:Object(v.a)({},r,{messages:[].concat(Object(He.a)(c),[n])})})})}return e},Ze={searchedusers:[]},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_SEARCH_RESULT":e=Object(v.a)({},e,{searchedusers:n})}return e},$e={notifications:[]},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_USER_NOTIFICATIONS":e=Object(v.a)({},e,{notifications:n})}return e},Qe=Object(Le.combineReducers)({authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_ACTIVE_USER":e=Object(v.a)({},e,{user:n})}return e},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_VIEWED_PROFILE":e=Object(v.a)({},e,{viewed_user:n});break;case"SET_VIEWED_USER_SAYS":e=Object(v.a)({},e,{viewed_user_says:n});break;case"SET_RELATIONSHIP":e=Object(v.a)({},e,{viewedProfileRelationship:n})}return e},interactions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"IS_VERIFYING_AUTHENTICATION":e=Object(v.a)({},e,{isverifyingauthentication:n});break;case"IS_CREATING_ACCOUNT":e=Object(v.a)({},e,{iscreatingaccount:n});break;case"IS_LOGGING_IN":e=Object(v.a)({},e,{isloggingin:n});break;case"IS_GETTING_PROFILE_DETAILS":e=Object(v.a)({},e,{isgettingprofiledetails:n});break;case"IS_GETTING_SAYS":e=Object(v.a)({},e,{isgettingsays:n});break;case"IS_GETTING_SAY":e=Object(v.a)({},e,{isgettingsinglesay:n});break;case"IS_GETTING_CONVERSATION":e=Object(v.a)({},e,{isgettingconversation:n})}return e},conversation:qe,searches:Je,notification:Ke}),Xe=a(74),et=a(75),tt=Object(et.composeWithDevTools)(Object(Le.applyMiddleware)(Xe.a)),at=Object(Le.createStore)(Qe,void 0,tt),nt=(a(140),ye()("http://localhost:5000"));at.dispatch((function(e){e(G(!0)),x.a.post(y,null,{withCredentials:!0}).then((function(t){var a=t.data.user;e(function(e){return{type:"SET_ACTIVE_USER",payload:e}}(a)),e(G(!1))})).catch((function(t){console.log(t),e(G(!1))}))})),o.a.render(c.a.createElement(h.a,{store:at},c.a.createElement(Me,{Socket:nt})),document.getElementById("root"))},36:function(e,t,a){e.exports=a.p+"static/media/get-outta-here.4633ab40.ogg"},56:function(e,t,a){},70:function(e,t,a){},73:function(e,t,a){e.exports=a.p+"static/media/insight.3290a035.ogg"},77:function(e,t,a){e.exports=a(141)}},[[77,1,2]]]);
//# sourceMappingURL=main.09465a15.chunk.js.map