(this["webpackJsonpcamp-us-frontend"]=this["webpackJsonpcamp-us-frontend"]||[]).push([[0],{104:function(e,t,a){},133:function(e,t){},136:function(e,t,a){},137:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(34),i=a.n(r),s=a(6),o=a(3),l=a(7),u=a(8),m=a(9),d=a(4),p=a(23),h=a(5),f=a(18),v=a(2),E="https://konert.herokuapp.com",g="".concat(E,"/api/v1"),b="".concat(g,"/auth/create-account"),y="".concat(g,"/auth/login"),N="".concat(g,"/auth/verify-authentication"),O="".concat(g,"/profile"),_="".concat(g,"/profile/check-connection"),S="".concat(g,"/profile/feeds/get-feeds"),w="".concat(g,"/says"),j="".concat(g,"/interaction/new-post"),C="".concat(g,"/interaction/new-comment"),k="".concat(g,"/interaction/post/like"),I="".concat(g,"/connections/follow"),T="".concat(g,"/connections/unfollow"),A="".concat(g,"/messaging/get-all-conversations"),U="".concat(g,"/messaging/get-active-conversation"),F="".concat(g,"/messaging/new-message"),R="".concat(g,"/people/search"),G="".concat(g,"/notifications/get-notifications"),x="".concat(g,"/interaction/getpost"),P=a(10),V=a.n(P),D=function(e){return{type:"IS_VERIFYING_AUTHENTICATION",payload:e}},M=function(e){return{type:"IS_LOGGING_IN",payload:e}},L=function(e){return{type:"IS_CREATING_ACCOUNT",payload:e}},z=function(e){return{type:"IS_GETTING_PROFILE_DETAILS",payload:e}},B=function(e){return{type:"IS_GETTING_SAYS",payload:e}},W=function(e){return{type:"IS_GETTING_SAY",payload:e}},H=function(e){return{type:"IS_GETTING_CONVERSATIONS",payload:e}},Y=function(e){return{type:"IS_POSTING",payload:e}},q=function(e){return{type:"IS_GETTING_CONVERSATION",payload:e}};function Z(e){return{type:"SET_ACTIVE_USER",payload:e}}a(56);var J=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target,n=t.id,c=t.value,r=Object(v.a)({},a.state.input,Object(f.a)({},n,c));a.setState({input:r})},a.createUserAccount=function(e){e.preventDefault();var t=a.state.input,n=function(e){var t={},a={name:{message:"Name is required",isValid:function(e){return""!==e.trim()&&new RegExp("^(?=.[a-zA-Z])").test(e)}},email:{message:"Email field is required",isValid:function(e){return""!==e.trim()&&new RegExp("^[a-zA-Z0-9_.-]{2,}@[a-zA-Z0-9]{2,}.[a-zA-Z0-9]{2,}$").test(e)}},nickname:{message:"Nickname field is required",isValid:function(e){if(""===e.trim())return!1;return/^\w{1,}$/.test(e)}},password:{message:"Password field is required",isValid:function(e){return""!==e.trim()&&new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,30})").test(e)}},cpassword:{message:"Passwords do not match",isValid:function(t){return t===e.password}}};for(var n in e){var c=a[n],r=c.isValid(e[n]);t[n]=r?null:c.message}return t}(t),c=!1;for(var r in n)n[r]&&(c=!0);if(c)console.log(n),console.log("There are fields with errors");else{var i=Object(v.a)({},t);delete i.cpassword,a.props.createUserAccount(i)}},a.state={input:{name:"",email:"",nickname:"",password:"",cpassword:""}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.input,t=e.name,a=e.email,n=e.password,r=e.cpassword,i=e.nickname;return this.props.user?c.a.createElement(p.a,{to:"/"}):c.a.createElement("div",{className:"camp-auth-container"},c.a.createElement("h1",{className:"camp-auth-title"},"Create Account"),c.a.createElement("form",{onSubmit:this.createUserAccount,noValidate:!0},c.a.createElement("div",null,c.a.createElement("label",{htmlFor:"name"},"Full Name",c.a.createElement("input",{type:"text",id:"name",placeholder:"James Allen",onChange:this.handleInputChange,value:t}))),c.a.createElement("div",null,c.a.createElement("label",{htmlFor:"email"},"Email",c.a.createElement("input",{type:"email",id:"email",placeholder:"Email",onChange:this.handleInputChange,value:a}))),c.a.createElement("div",null,c.a.createElement("label",{htmlFor:"nickname"},"Nickname",c.a.createElement("input",{type:"text",id:"nickname",placeholder:"Nickname",onChange:this.handleInputChange,value:i}))),c.a.createElement("div",null,c.a.createElement("label",{htmlFor:"cpassword"},"Password",c.a.createElement("input",{type:"password",id:"password",placeholder:"Password",onChange:this.handleInputChange,value:n}))),c.a.createElement("div",null,c.a.createElement("label",{htmlFor:"cpassword"},"Confirm Password",c.a.createElement("input",{type:"password",id:"cpassword",placeholder:"Confirm Password",onChange:this.handleInputChange,value:r}))),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"Create Account"))),c.a.createElement("p",null,"Already have an account ",c.a.createElement(d.b,{to:"/auth/login"},"Login")))}}]),t}(n.Component),$=Object(h.b)((function(e){return{}}),(function(e){return{createUserAccount:function(t){return e(function(e){return function(t){t(L(!0)),V.a.post(b,e,{withCredentials:!0}).then((function(e){console.log(e.data),t(L(!1))})).catch((function(e){console.log(e),t(L(!1))}))}}(t))}}}))(J),K=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target,n=t.id,c=t.value,r=Object(v.a)({},a.state.input,Object(f.a)({},n,c));a.setState({input:r})},a.login=function(e){e.preventDefault();var t=a.state.input;a.props.login(t)},a.state={input:{username:"",password:""}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.input,t=e.username,a=e.password;return this.props.user?c.a.createElement(p.a,{to:"/"}):c.a.createElement("div",{className:"camp-auth-container"},c.a.createElement("h1",{className:"camp-auth-title"},"Login"),c.a.createElement("form",{onSubmit:this.login,noValidate:!0},c.a.createElement("div",null,c.a.createElement("label",{htmlFor:"username"},c.a.createElement("input",{type:"text",placeholder:"username or email",id:"username",value:t,onChange:this.handleInputChange}))),c.a.createElement("div",null,c.a.createElement("label",{htmlFor:"password"},c.a.createElement("input",{type:"password",placeholder:"Password",id:"password",value:a,onChange:this.handleInputChange}))),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"Login"))),c.a.createElement("p",null,"Don't have an account ",c.a.createElement(d.b,{to:"/auth/signup"},"Create Account")))}}]),t}(n.Component),Q=Object(h.b)((function(e){return{}}),(function(e){return{login:function(t){return e(function(e){return function(t){t(M(!0)),V.a.post(y,e,{withCredentials:!0}).then((function(e){var a=e.data.user;t(Z(a)),t(M(!1))})).catch((function(e){return t(M(!1))}))}}(t))}}}))(K),X=function(e){return{type:"SET_VIEWED_PROFILE",payload:e}},ee=function(e){return{type:"SET_VIEWED_USER_SAYS",payload:e}},te=function(e){return{type:"SET_RELATIONSHIP",payload:e}},ae=function(e){return function(t){t(B(!0)),V.a.get("".concat(w,"/").concat(e),{withCredentials:!0}).then((function(e){var a=e.data;t(ee(a.says)),t(B(!1))})).catch((function(e){return B(!1)}))}},ne=(a(104),a(57),a(151)),ce=a(152),re=a(153),ie=a(154),se=a(155),oe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={user:null},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.setState({user:this.props.user})}},{key:"render",value:function(){var e=this.props.user,t=(e||{})._id;return e?c.a.createElement("div",{className:"camp-navigation-bar"},c.a.createElement("nav",{className:"camp-mobile-navigation-bar"},c.a.createElement("div",null,c.a.createElement(d.c,{to:"/",exact:!0,activeClassName:"camp-active-nav"},c.a.createElement(ne.a,{fontSize:"default",className:"camp-navigation-icon"}))),c.a.createElement("div",null,c.a.createElement(d.c,{to:"/search",exact:!0,activeClassName:"camp-active-nav"},c.a.createElement(ce.a,{fontSize:"default",className:"camp-navigation-icon"}))),c.a.createElement("div",null,c.a.createElement(d.c,{to:"/messages",exact:!0,activeClassName:"camp-active-nav"},c.a.createElement(re.a,{fontSize:"default",className:"camp-navigation-icon"}))),c.a.createElement("div",null,c.a.createElement(d.c,{to:"/profile/".concat(t),exact:!0,activeClassName:"camp-active-nav"},c.a.createElement(ie.a,{fontSize:"default",className:"camp-navigation-icon"}))),c.a.createElement("div",null,c.a.createElement(d.c,{to:"/notifications",exact:!0,activeClassName:"camp-active-nav"},c.a.createElement(se.a,{fontSize:"default",className:"camp-navigation-icon"}))))):c.a.createElement(p.a,{to:"/auth/login"})}}]),t}(n.Component),le=Object(h.b)((function(e){return{user:e.authentication.user}}),null)(oe),ue=a(74),me=a.n(ue),de=function(e){return function(t){V.a.post(k,{say:e},{withCredentials:!0}).then((function(e){})).catch((function(e){return console.log(e)}))}},pe=function(e){return{type:"SET_FEEDS",payload:e}},he=a(156),fe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target.value;a.setState({postText:t})},a.postSomething=function(e){e.preventDefault();var t=a.state.postText,n=a.props,c=n.isposting,r=n.isgettingsays;""===t||c||r||(a.props.postSay(t),a.setState({postText:""}))},a.unfollowUser=function(){var e=a.props,t=e.user;return(0,e.unfollowUser)(t._id)},a.followUser=function(){var e=a.props,t=e.user;return(0,e.followUser)(t._id)},a.state={postText:""},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.postText,t=this.props,a=t.page,n=t.isAuthUser,r=t.user,i=t.relationship,s=t.isposting,o=(t.isgettingsays,i||{}),l=o.isMutual,u=o.isFollowing,m=r.name,p=r.nickname,h=r._id,f="profile"!==a||n?c.a.createElement(c.a.Fragment,null):c.a.createElement("div",{className:"camp-relation-container"},u||l?c.a.createElement("button",{className:"camp-relation camp-relation-unfollow",onClick:this.unfollowUser},"Unfollow"):c.a.createElement("button",{className:"camp-relation camp-relation-follow",onClick:this.followUser},"Follow"),l&&c.a.createElement(d.b,{to:"/chat/".concat(h)},c.a.createElement(he.a,{color:"action"})));return c.a.createElement("div",{className:"camp-balloon-head"},c.a.createElement("div",{className:"camp-head-top"},c.a.createElement("div",{className:"camp-user-avatar"}),c.a.createElement("div",{className:"camp-user-details"},c.a.createElement("h3",null,"".concat(m)),c.a.createElement("p",null,"@".concat(p)))),n&&c.a.createElement("div",{className:"camp-head-bottom"},c.a.createElement("form",{noValidate:!0,onSubmit:this.postSomething},c.a.createElement("textarea",{placeholder:"Have a say",value:e,onChange:this.handleInputChange}),s?c.a.createElement("button",{disabled:!0},"Posting ..."):c.a.createElement("button",null," Make Post"))),f)}}]),t}(n.Component),ve=Object(h.b)((function(e){return{}}),(function(e){return{postSay:function(t){return e(function(e){return function(t){t(Y(!0)),V.a.post(j,{content:e},{withCredentials:!0}).then((function(e){var a=new Audio(me.a);a.play().then((function(){a.remove()})).catch((function(e){return console.log(e)})),t(Y(!1))})).catch((function(e){t(Y(!1))}))}}(t))},followUser:function(t){return e(function(e){return function(t){V.a.post(I,{whomToFollow:e},{withCredentials:!0}).then((function(e){console.log("data ",e.data)})).catch((function(e){return console.log(e)}))}}(t))},unfollowUser:function(t){return e(function(e){return console.log("let us unfollow user"),function(t){V.a.post(T,{whoToUnfollow:e},{withCredentials:!0}).then((function(e){console.log(e.data)})).then((function(e){return console.log(e)}))}}(t))}}}))(fe),Ee=a(157),ge=a(158),be=a(36),ye=a.n(be),Ne=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.says,a=e.likeOrUnlike,n=e.isposting,r=e.isgettingsays,i=t?t.map((function(e,t){var n=e.content,r=e.said_by,i=e._id,s=e.likes,o=e.comments,l=r.name,u=r.nickname,m=r._id;return c.a.createElement("div",{className:"camp-a-say",key:t},c.a.createElement("div",{className:"camp-say-top"},c.a.createElement("div",{className:"camp-say-talker"}),c.a.createElement("div",{className:"camp-say-talker-details"},c.a.createElement("h4",null,c.a.createElement(d.b,{to:"/profile/".concat(m)},"".concat(l))),c.a.createElement("p",null,"@".concat(u))),c.a.createElement("div",{className:"camp-say-time"},c.a.createElement("p",null,"just now"))),c.a.createElement("div",{className:"camp-say-bottom"},c.a.createElement("div",{className:"camp-say-say"},c.a.createElement("p",null,n)),c.a.createElement("div",{className:"camp-say-reaction"},c.a.createElement("button",{onClick:function(){var e=new Audio(ye.a);e.play().then((function(){e.remove()})).catch((function(e){return console.log(e)})),a(i)}},s.length,c.a.createElement(Ee.a,{fontSize:"small",color:"secondary",className:"camp-react"})),c.a.createElement(d.b,{to:{pathname:"/view-post/".concat(i),say:e}},o.length," ",c.a.createElement(ge.a,{fontSize:"small",className:"camp-react"})))))})):c.a.createElement("div",null,"hello");return c.a.createElement("div",{className:"camp-render-says"},n&&c.a.createElement("div",{className:"camp-say-placeholder"},c.a.createElement("div",{className:"camp-say-like"},c.a.createElement("div",{className:"left"}),c.a.createElement("div",{className:"right"},c.a.createElement("div",{className:"name"}),c.a.createElement("div",{className:"nick"}))),c.a.createElement("div",{className:"camp-say-text"},c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null))),r?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"camp-say-placeholder"},c.a.createElement("div",{className:"camp-say-like"},c.a.createElement("div",{className:"left"}),c.a.createElement("div",{className:"right"},c.a.createElement("div",{className:"name"}),c.a.createElement("div",{className:"nick"}))),c.a.createElement("div",{className:"camp-say-text"},c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null))),c.a.createElement("div",{className:"camp-say-placeholder"},c.a.createElement("div",{className:"camp-say-like"},c.a.createElement("div",{className:"left"}),c.a.createElement("div",{className:"right"},c.a.createElement("div",{className:"name"}),c.a.createElement("div",{className:"nick"}))),c.a.createElement("div",{className:"camp-say-text"},c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null))),c.a.createElement("div",{className:"camp-say-placeholder"},c.a.createElement("div",{className:"camp-say-like"},c.a.createElement("div",{className:"left"}),c.a.createElement("div",{className:"right"},c.a.createElement("div",{className:"name"}),c.a.createElement("div",{className:"nick"}))),c.a.createElement("div",{className:"camp-say-text"},c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null)))):i)}}]),t}(n.Component),Oe=Object(h.b)((function(e){var t=e.interactions;return{isgettingsays:t.isgettingsays,isposting:t.isposting}}),(function(e){return{likeOrUnlike:function(t){return e(de(t))}}}))(Ne),_e=a(27),Se=a.n(_e),we=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={isAuthUsers:!1,page:"profile",feeds_socket:null},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.user,n=t.says,r=a._id,i=this.props.match.params.profile_id,s=Se.a.connect("".concat(E,"/profile"));if(!a)return c.a.createElement(p.a,{to:"/auth/login"});r===i?(this.setState({isAuthUser:!0,feeds_socket:s}),this.props.setViewProfile(a),n.length<=0&&this.props.getUserSays(r)):(this.setState({isAuthUser:!1}),this.props.getUserProfile(i),this.props.checkRelationship(i),setInterval((function(){s.emit("get_relationship",{authUserId:r,profile_id:i})}),500)),s.on("connect",(function(){e.setState({feeds_socket:s}),s.on("set_profile_feeds",(function(t){e.props.setFeeds(t)})),s.on("set_relationship",(function(t){e.props.setRelationship(t)}))})),setInterval((function(){var t=e.state.isAuthUser;s.emit("get_profile_feeds",{oldFeeds:e.props.says,profile_id:t?r:i})}),500)}},{key:"componentWillUnmount",value:function(){this.state.feeds_socket.disconnect(),this.setState({feeds_socket:null}),this.props.setFeeds([]),this.props.setRelationship({}),this.props.setViewProfile({})}},{key:"render",value:function(){var e=this.props,t=e.says,a=e.viewed_profile,n=(e.isgettingprofile,e.isgettingsays,e.relationship),r=e.user,i=this.state,s=i.isAuthUser,o=i.page;return r?c.a.createElement(c.a.Fragment,null,c.a.createElement(le,null),c.a.createElement("div",{className:"camp-main-content"},c.a.createElement(c.a.Fragment,null,c.a.createElement(ve,{isAuthUser:s,page:o,user:a,relationship:n}),c.a.createElement(Oe,{says:t})))):c.a.createElement(p.a,{to:"/auth/login"})}}]),t}(n.Component),je=Object(h.b)((function(e){var t=e.authentication,a=e.profile,n=e.interactions;return{user:t.user,says:a.viewed_user_says,viewed_profile:a.viewed_user,isgettingprofile:n.isgettingprofiledetails,isgettingsays:n.isgettingsays,relationship:a.viewedProfileRelationship}}),(function(e){return{setViewProfile:function(t){return e(X(t))},getUserSays:function(t){return e(ae(t))},getUserProfile:function(t){return e(function(e){return function(t){t(z(!0)),V.a.get("".concat(O,"/").concat(e),{withCredentials:!0}).then((function(a){var n=a.data.user;t(X(n)),t(ae(e)),t(z(!1))})).then((function(e){return t(z(!1))}))}}(t))},checkRelationship:function(t,a){return e(function(e){return function(t){V.a.get("".concat(_,"/").concat(e),{withCredentials:!0}).then((function(e){var a=e.data;console.log(a),t(te(a))})).catch((function(e){return console.log(e)}))}}(t))},setRelationship:function(t){return e(te(t))},setFeeds:function(t){return e(ee(t))}}}))(we),Ce=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={feeds_socket:null},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.newsfeeds,n=t.user;if(!n)return this.props.history.push("/auth/login");if(a.length<=0&&this.props.loadFeeds(),"undefined"!=typeof n._id){var c=Se.a.connect("".concat(E,"/feeds"));c.on("connect",(function(){e.setState({feeds_socket:c}),c.emit("connection_",n._id),c.on("got_new_feeds",(function(t){e.props.setFeeds(t.reverse())}))})),setInterval((function(){var t=e.props.newsfeeds;c.emit("get_feeds_update",{oldFeeds:t,authuserid:n._id})}),500)}}},{key:"componentWillUnmount",value:function(){var e=this.state.feeds_socket;e&&(e.disconnect(),this.setState({feeds_socket:null}))}},{key:"render",value:function(){var e=this.props,t=e.user,a=e.isgettingsays,n=e.isposting;return t?c.a.createElement(c.a.Fragment,null,c.a.createElement(le,null),c.a.createElement("div",{className:"camp-main-content"},c.a.createElement(c.a.Fragment,null,c.a.createElement(ve,{isAuthUser:!0,user:t,isgettingsays:a,isposting:n}),c.a.createElement(Oe,{says:this.props.newsfeeds})))):c.a.createElement(p.a,{to:"/auth/login"})}}]),t}(n.Component),ke=Object(h.b)((function(e){var t=e.authentication,a=e.conversation,n=e.interactions;return{user:t.user,newsfeeds:a.newsfeeds,isgettingsays:n.isgettingsays,isposting:n.isposting}}),(function(e){return{loadFeeds:function(){return e((function(e){e(B(!0)),V.a.get(S,{withCredentials:!0}).then((function(t){var a=t.data.feeds;e(pe(a.reverse())),e(B(!1))})).catch((function(t){return e(B(!1))}))}))},setFeeds:function(t){return e(pe(t))}}}))(Ce),Ie=(a(71),function(e){var t=e.authuser,a=e.conversations,n=e.isgettingconversations;console.log(a);var r=a.map((function(e,a){var n=e.messages,r=e.user1,i=e.user2,s=t._id===r._id?i:r,o=n[n.length-1].body.length>30?"".concat(n[n.length-1].body.slice(0,30),"......"):n[n.length-1].body;return c.a.createElement(d.b,{to:"/chat/".concat(s._id),className:"camp-a-card",key:a},c.a.createElement("div",{className:"camp-a-card-left"}),c.a.createElement("div",{className:"camp-a-card-right"},c.a.createElement("h4",null,s.name),c.a.createElement("p",null,o)))}));return c.a.createElement(c.a.Fragment,null,n?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"camp-conversation-placeholder"},c.a.createElement("div",{className:"left"}),c.a.createElement("div",{className:"right"},c.a.createElement("div",null),c.a.createElement("div",null))),c.a.createElement("div",{className:"camp-conversation-placeholder"},c.a.createElement("div",{className:"left"}),c.a.createElement("div",{className:"right"},c.a.createElement("div",null),c.a.createElement("div",null))),c.a.createElement("div",{className:"camp-conversation-placeholder"},c.a.createElement("div",{className:"left"}),c.a.createElement("div",{className:"right"},c.a.createElement("div",null),c.a.createElement("div",null))),c.a.createElement("div",{className:"camp-conversation-placeholder"},c.a.createElement("div",{className:"left"}),c.a.createElement("div",{className:"right"},c.a.createElement("div",null),c.a.createElement("div",null))),c.a.createElement("div",{className:"camp-conversation-placeholder"},c.a.createElement("div",{className:"left"}),c.a.createElement("div",{className:"right"},c.a.createElement("div",null),c.a.createElement("div",null)))):r)}),Te=(a(136),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getConversations()}},{key:"render",value:function(){var e=this.props,t=e.conversations,a=e.authuser,n=e.isgettingconversations;return c.a.createElement(c.a.Fragment,null,c.a.createElement(le,null),c.a.createElement("div",{className:"camp-main-content"},c.a.createElement(Ie,{conversations:t,authuser:a,isgettingconversations:n})))}}]),t}(n.Component)),Ae=Object(h.b)((function(e){var t=e.conversation,a=e.authentication,n=e.interactions;return{conversations:t.conversations,authuser:a.user,isgettingconversations:n.isgettingconversations}}),(function(e){return{getConversations:function(){return e((function(e){e(H(!0)),V.a.get(A,{withCredentials:!0}).then((function(t){console.log(t.data.conversations),e({type:"GET_CONVERSATIONS",payload:t.data.conversations.reverse()}),e(H(!1))})).catch((function(t){return e(H(!1))}))}))}}}))(Te),Ue=(a(137),a(159)),Fe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target.value,n=a.state,c=n.chat_nsp,r=n.friend;""!==t&&t.length>0?c.emit("typing",{friend:r._id}):c.emit("done_typing",{friend:r._id}),a.setState({body:t})},a.sendMessage=function(e){e.preventDefault();var t=a.state,n=t.body,c=t.friend,r=t.chat_nsp,i=a.props.authuser;if(""!==n&&""!==n.trimLeft()&&""!==n.trimRight()){var s={body:n,friendid:c._id},o=Object(v.a)({},s,{time:Date.now()});a.setState({body:"",typing:!1},(function(){r.emit("new_message",o),r.emit("done_typing",{friend:c._id}),a.chatBodyRef.scrollTop=a.chatBodyRef.scrollHeight})),a.props.appendMessage(Object(v.a)({},o,{sender:i._id})),a.props.sendMessage(s)}},a.state={body:"",chat_nsp:null,typing:!1,friend:{},friendid:"",bottom:!1},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.friendid,a=this.props.authuser._id;this.setState({friendid:t},(function(){e.props.fetchConversation(t)}));var n=Se.a.connect("".concat(E,"/chat"));n.on("connect",(function(){e.setState({chat_nsp:n}),n.emit("user_connected",{user:a}),n.on("typing",(function(){e.setState({typing:!0})})),n.on("done_typing",(function(){e.setState({typing:!1})})),n.on("new_message",(function(t){var a=e.state.friend;e.props.appendMessage(Object(v.a)({},t,{sender:a._id}))}))}))}},{key:"componentDidUpdate",value:function(){if(!this.props.isgettingconversation){var e=this.state.bottom;if(e)return;this.setState({bottom:!e}),this.chatBodyRef.scrollTop=this.chatBodyRef.scrollHeight}}},{key:"componentWillUnmount",value:function(){var e=this.state.chat_nsp;e&&(e.disconnect(),this.setState({chat_nsp:null}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.body,n=t.typing,r=t.friend,i=this.props,s=i.authuser,o=i.chatConversation,l=i.gettingconversation;console.log("getting data, ",l);var u=s._id,m=o.conversation;if(!s)return c.a.createElement(p.a,{to:"/auth/login"});var d=m?this.props.chatConversation.conversation.messages.map((function(e,t){var a=e.body,n=e.sender;return c.a.createElement("div",{className:"camp-chat-balloon ".concat(n===u?"camp-balloon-authuser":"camp-balloon-friend"),key:t},c.a.createElement("div",{className:"camp-balloon"},c.a.createElement("p",null,a)))})):c.a.createElement("p",null,"No message oo");return c.a.createElement(c.a.Fragment,null,c.a.createElement(le,null),c.a.createElement("div",{className:"camp-main-content"},c.a.createElement("div",{className:"camp-active-chat-bubble"},c.a.createElement("div",{className:"camp-bubble-head"},l?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"camp-bubble-head-user"}),c.a.createElement("div",{className:"camp-chat-placeholder"},c.a.createElement("div",{className:"camp-name"}),c.a.createElement("div",{className:"camp-username"}))):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"camp-bubble-head-user"}),c.a.createElement("div",{className:"camp-bubble-head-user-details"},c.a.createElement("h4",null,r.name),n?c.a.createElement("p",{style:{color:"green",fontWeight:"bolder"}},"typing..."):c.a.createElement("p",null,"@",r.nickname)))),c.a.createElement("div",{className:"camp-bubble-body",ref:function(t){return e.chatBodyRef=t}},l?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"left"},c.a.createElement("div",null)),c.a.createElement("div",{className:"right"},c.a.createElement("div",null)),c.a.createElement("div",{className:"left"},c.a.createElement("div",null)),c.a.createElement("div",{className:"right"},c.a.createElement("div",null)),c.a.createElement("div",{className:"right"},c.a.createElement("div",null)),c.a.createElement("div",{className:"right"},c.a.createElement("div",null)),c.a.createElement("div",{className:"left"},c.a.createElement("div",null)),c.a.createElement("div",{className:"right"},c.a.createElement("div",null)),c.a.createElement("div",{className:"right"},c.a.createElement("div",null))):d),c.a.createElement("div",{className:"camp-bubble-leg"},c.a.createElement("form",{noValidate:!0,onSubmit:this.sendMessage},c.a.createElement("textarea",{placeholder:"Your message...",value:a,onChange:this.handleInputChange}),c.a.createElement("button",null,c.a.createElement(Ue.a,{fontSize:"default"})))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.chatConversation,n=e.authuser;if("undefined"!==typeof a.conversation){var c=a.conversation,r=c.user1,i=c.user2;return{friend:n._id===r._id?i:r}}return{}}}]),t}(n.Component),Re=Object(h.b)((function(e){var t=e.conversation,a=e.authentication,n=e.interactions;return{chatConversation:t.activeBubble,authuser:a.user,gettingconversation:n.isgettingconversation}}),(function(e){return{fetchConversation:function(t,a){return e(function(e){return function(t){t(q(!0)),V.a.get("".concat(U,"/").concat(e),{withCredentials:!0}).then((function(e){t({type:"GET_ACTIVE_CONVERSATION",payload:e.data}),t(q(!1))})).catch((function(e){t(q(!1))}))}}(t))},sendMessage:function(t){return e(function(e){return function(t){V.a.post(F,e,{withCredentials:!0}).then((function(e){})).catch((function(e){return console.log(e)}))}}(t))},appendMessage:function(t){return e(function(e){return{type:"APPEND_MESSAGE",payload:e}}(t))}}}))(Fe),Ge=(a(138),function(e){var t=e.searchedusers,a=e.authuser._id,n=t.map((function(e,t){var n=e._id,r=e.name,i=e.nickname;return a===n?null:c.a.createElement("p",{className:"camp-a-search",key:t},c.a.createElement(d.b,{to:"/profile/".concat(n)},"".concat(r)),c.a.createElement("span",null,"@",i))}));return c.a.createElement("div",{className:"camp-search-results"},n)}),xe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target.value;a.setState({searchquery:t})},a.findUser=function(e){console.log("finding user"),e.preventDefault();var t=a.state.searchquery;console.log(t),""!==t.trimLeft()&&""!==t.trimRight()&&a.props.findUser(t)},a.state={searchquery:""},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.searchquery,t=this.props,a=t.searchedusers,n=t.authuser;return n?c.a.createElement(c.a.Fragment,null,c.a.createElement(le,null),c.a.createElement("div",{className:"camp-main-content"},c.a.createElement("div",{className:"camp-search-container"},c.a.createElement("form",{noValidate:!0,onSubmit:this.findUser},c.a.createElement("input",{type:"text",placeholder:"search friend",value:e,onChange:this.handleInputChange}))),c.a.createElement(Ge,{authuser:n,searchedusers:a}))):c.a.createElement(p.a,{to:"/auth/login"})}}]),t}(n.Component),Pe=Object(h.b)((function(e){var t=e.searches,a=e.authentication;return{searchedusers:t.searchedusers,authuser:a.user}}),(function(e){return{findUser:function(t){return e(function(e){return console.log("let find a user"),function(t){V.a.get("".concat(R,"/").concat(e),{withCredentials:!0}).then((function(e){var a=e.data.searchedusers;t({type:"SET_SEARCH_RESULT",payload:a})})).catch((function(e){return console.log(e)}))}}(t))}}}))(xe),Ve=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getUserNotifications()}},{key:"render",value:function(){return this.props.authuser?c.a.createElement(c.a.Fragment,null,c.a.createElement(le,null),c.a.createElement("div",{className:"camp-main-content"},"user notifications")):c.a.createElement(p.a,{to:"/auth/login"})}}]),t}(n.Component),De=Object(h.b)((function(e){return{authuser:e.authentication.user}}),(function(e){return{getUserNotifications:function(){return e((function(e){V.a.get(G,{withCredentials:!0}).then((function(t){var a=t.data.notifications;console.log(a),e(function(e){return{type:"SET_USER_NOTIFICATIONS",payload:e}}(a))})).catch((function(e){console.log(e)}))}))}}}))(Ve),Me=(a(139),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target.value;a.setState({comment:t})},a.comment=function(e){e.preventDefault();var t=a.props.say._id,n=a.state.comment;""!==n.trimRight()&&""!==n.trimRight()&&(a.props.comment(n,t),a.setState({comment:""}))},a.state={comment:""},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.postid;this.props.getPost(e)}},{key:"render",value:function(){var e=this.props,t=e.say,a=e.isgettingsay,n=e.authuser,r=this.state.comment;if(!n)return c.a.createElement(p.a,{to:"/auth/login"});if(a)return c.a.createElement(c.a.Fragment,null,c.a.createElement(le,null),c.a.createElement("div",{className:"camp-main-content"},c.a.createElement("p",null,"Fetching data")));if("undefined"!=typeof t.said_by){var i=t.content,s=t.said_by,o=t._id,l=t.likes,u=t.comments,m=s.nickname,h=s.name,f=s._id;return c.a.createElement(c.a.Fragment,null,c.a.createElement(le,null),c.a.createElement("div",{className:"camp-main-content"},c.a.createElement("div",{className:"camp-a-say"},c.a.createElement("div",{className:"camp-say-top"},c.a.createElement("div",{className:"camp-say-talker"}),c.a.createElement("div",{className:"camp-say-talker-details"},c.a.createElement("h4",null,c.a.createElement(d.b,{to:"/profile/".concat(f)},"".concat(h))),c.a.createElement("p",null,"@".concat(m))),c.a.createElement("div",{className:"camp-say-time"},c.a.createElement("p",null,"just now"))),c.a.createElement("div",{className:"camp-say-bottom"},c.a.createElement("div",{className:"camp-say-say"},c.a.createElement("p",null,i)),c.a.createElement("div",{className:"camp-comments"},u.length?u.map((function(e,t){var a=e.body;e.said_by;return c.a.createElement("p",{key:t},a)})):null),c.a.createElement("div",{className:"camp-say-comment-box"},c.a.createElement("form",{noValidate:!0,onSubmit:this.comment},c.a.createElement("textarea",{placeholder:"your comment",value:r,onChange:this.handleInputChange}),c.a.createElement("button",null,"comment"))),c.a.createElement("div",{className:"camp-say-reaction"},c.a.createElement("button",{onClick:function(){var e=new Audio(ye.a);e.play().then((function(){e.remove()})).catch((function(e){})),de(f)}},l.length,c.a.createElement(Ee.a,{fontSize:"small",color:"secondary",className:"camp-react"})),c.a.createElement("button",{to:{pathname:"/view-post/".concat(o),say:t}},u.length," ",c.a.createElement(ge.a,{fontSize:"small",className:"camp-react"})))))))}return c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"Ooops something is broken"))}}]),t}(n.Component)),Le=Object(h.b)((function(e){var t=e.conversation,a=e.interactions;return{say:t.viewedPost,isgettingsay:a.isgettingsinglesay,authuser:e.authentication.user}}),(function(e){return{likeOrUnlike:function(t){return e(de(t))},getPost:function(t){return e(function(e){return function(t){t(W(!0)),V.a.get("".concat(x,"/").concat(e),{withCredentials:!0}).then((function(e){var a=e.data.say;t(W(!1)),t({type:"SET_VIEWED_POST",payload:a})})).catch((function(e){return console.log(e)}))}}(t))},comment:function(t,a){return e(function(e,t){return function(a){V.a.post(C,{body:e,postid:t},{withCredentials:!0}).then((function(e){})).catch((function(e){console.log(e)}))}}(t,a))}}}))(Me),ze=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={user:null},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isverifyingauth,a=(e.Socket,e.user);return c.a.createElement(d.a,null,t?c.a.createElement("div",{className:"App camp-loader"},c.a.createElement("h2",null,"Konert"),c.a.createElement("p",null,"Checking your ID...")):c.a.createElement("div",{className:"App"},c.a.createElement(p.d,null,c.a.createElement(p.b,{exact:!0,path:"/",render:function(e){return c.a.createElement(ke,e)}}),c.a.createElement(p.b,{exact:!0,path:"/auth/signup",render:function(e){return c.a.createElement($,Object.assign({},e,{user:a}))}}),c.a.createElement(p.b,{exact:!0,path:"/auth/login",render:function(e){return c.a.createElement(Q,Object.assign({},e,{user:a}))}}),c.a.createElement(p.b,{exact:!0,path:"/profile/:profile_id",render:function(e){return c.a.createElement(je,e)}}),c.a.createElement(p.b,{exact:!0,path:"/messages",render:function(e){return c.a.createElement(Ae,e)}}),c.a.createElement(p.b,{exact:!0,path:"/chat/:friendid",render:function(e){return c.a.createElement(Re,e)}}),c.a.createElement(p.b,{exact:!0,path:"/search",render:function(e){return c.a.createElement(Pe,e)}}),c.a.createElement(p.b,{exact:!0,path:"/notifications",render:function(e){return c.a.createElement(De,e)}}),c.a.createElement(p.b,{exact:!0,path:"/view-post/:postid",render:function(e){return c.a.createElement(Le,e)}}))))}}]),t}(n.Component),Be=Object(h.b)((function(e){var t=e.interactions,a=e.authentication;return{isverifyingauth:t.isverifyingauthentication,user:a.user}}),(function(e){return{}}))(ze),We=a(22),He={user:null},Ye={viewed_user:{},viewed_user_says:[],viewedProfileRelationship:{},isFollowingUser:!1,relationshipIsMutual:!1},qe={isloggingin:!1,iscreatingaccount:!1,isverifyingauthentication:!1,isgettingprofiledetails:!1,isgettingsays:!1,isgettingsinglesay:!1,isgettingconversations:!1,isgettingconversation:!1,isposting:!1},Ze=a(37),Je={conversations:[],activeBubble:{},newsfeeds:[],viewedPost:{}},$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"GET_CONVERSATIONS":e=Object(v.a)({},e,{conversations:n});break;case"GET_ACTIVE_CONVERSATION":e=Object(v.a)({},e,{activeBubble:n});break;case"SET_FEEDS":e=Object(v.a)({},e,{newsfeeds:n});break;case"SET_VIEWED_POST":e=Object(v.a)({},e,{viewedPost:n});break;case"APPEND_MESSAGE":var c=e.activeBubble.conversation.messages,r=e.activeBubble.conversation;e=Object(v.a)({},e,{activeBubble:Object(v.a)({},e.activeBubble,{conversation:Object(v.a)({},r,{messages:[].concat(Object(Ze.a)(c),[n])})})})}return e},Ke={searchedusers:[]},Qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_SEARCH_RESULT":e=Object(v.a)({},e,{searchedusers:n})}return e},Xe={notifications:[]},et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_USER_NOTIFICATIONS":e=Object(v.a)({},e,{notifications:n})}return e},tt=Object(We.combineReducers)({authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_ACTIVE_USER":e=Object(v.a)({},e,{user:n})}return e},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_VIEWED_PROFILE":e=Object(v.a)({},e,{viewed_user:n});break;case"SET_VIEWED_USER_SAYS":e=Object(v.a)({},e,{viewed_user_says:n});break;case"SET_RELATIONSHIP":e=Object(v.a)({},e,{viewedProfileRelationship:n})}return e},interactions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"IS_VERIFYING_AUTHENTICATION":e=Object(v.a)({},e,{isverifyingauthentication:n});break;case"IS_CREATING_ACCOUNT":e=Object(v.a)({},e,{iscreatingaccount:n});break;case"IS_LOGGING_IN":e=Object(v.a)({},e,{isloggingin:n});break;case"IS_GETTING_PROFILE_DETAILS":e=Object(v.a)({},e,{isgettingprofiledetails:n});break;case"IS_GETTING_SAYS":e=Object(v.a)({},e,{isgettingsays:n});break;case"IS_GETTING_SAY":e=Object(v.a)({},e,{isgettingsinglesay:n});break;case"IS_GETTING_CONVERSATIONS":e=Object(v.a)({},e,{isgettingconversations:n});break;case"IS_POSTING":e=Object(v.a)({},e,{isposting:n});break;case"IS_GETTING_CONVERSATION":e=Object(v.a)({},e,{isgettingconversation:n})}return e},conversation:$e,searches:Qe,notification:et}),at=a(75),nt=a(76),ct=Object(nt.composeWithDevTools)(Object(We.applyMiddleware)(at.a)),rt=Object(We.createStore)(tt,void 0,ct);a(140);rt.dispatch((function(e){e(D(!0)),V.a.post(N,null,{withCredentials:!0}).then((function(t){var a=t.data.user;e(Z(a)),e(D(!1))})).catch((function(t){console.log(t),e(D(!1))}))})),i.a.render(c.a.createElement(h.a,{store:rt},c.a.createElement(Be,null)),document.getElementById("root"))},36:function(e,t,a){e.exports=a.p+"static/media/get-outta-here.4633ab40.ogg"},56:function(e,t,a){},57:function(e,t,a){},71:function(e,t,a){},74:function(e,t,a){e.exports=a.p+"static/media/insight.3290a035.ogg"},78:function(e,t,a){e.exports=a(141)}},[[78,1,2]]]);
//# sourceMappingURL=main.dec05c5c.chunk.js.map